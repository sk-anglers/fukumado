# 1. プロジェクト概要

## 1.1 アプリケーションの目的

**ふくまど！(Fukumado)** は、YouTube Live、Twitch、ニコニコ生放送など複数のプラットフォームの配信を同時に視聴できるマルチストリーミングビューアアプリケーションです。

## 1.2 主要機能

### コア機能
- **マルチプラットフォーム対応**: YouTube、Twitch、ニコニコ生放送の配信を同一インターフェース内で視聴
- **柔軟なレイアウト**: 2x2グリッド、1x2、フォーカスモードなど、複数のレイアウトプリセット
- **リアルタイムチャット**: 各プラットフォームのチャットをリアルタイム表示・送信
- **個別音量制御**: 各配信スロットごとに音量・ミュートを独立制御
- **音声同期**: マスタースロット機能でスロット間の音声タイミングを同期
- **配信通知**: フォローチャンネルの配信開始を通知
- **データ使用量監視**: Resource Timing APIでデータ転送量をモニタリング
- **OAuth認証**: Google（YouTube）とTwitchのOAuth2認証
- **全画面モード**: 配信グリッドの全画面表示
- **自動同期**: 配信リストの定期的な自動同期（30秒〜5分間隔）

### 管理・運用機能
- **管理者ダッシュボード**: システムメトリクス、ログ、キャッシュ、セキュリティの一元管理
- **アナリティクス**: ユーザー行動追跡、ボタンクリック追跡、PVカウント
- **メンテナンスモード**: 計画的なメンテナンス実施とユーザー通知
- **セキュリティ監視**: 異常検知、レート制限、攻撃検知とブロック
- **Cookie同意管理**: GDPR準拠のCookie同意バナーと設定管理
- **法的文書管理**: 利用規約・プライバシーポリシーの動的配信
- **負荷テスト結果**: k6による負荷テスト結果とパフォーマンス分析

### レスポンシブ対応
- **モバイル制限表示**: モバイルデバイスでの使用制限通知
- **ブラウザ互換性チェック**: 非対応ブラウザでの警告表示
- **メディアクエリ対応**: デバイスに応じた最適なUI表示

## 1.3 対象ユーザー

- 複数の配信を同時視聴したい視聴者
- ゲーム実況、esportsイベントなどで複数視点を同時確認したいユーザー
- 配信者の動向をリアルタイムで追跡したい視聴者

## 1.4 技術的特徴

**ふくまど！**は以下の技術的特徴を持ちます：

### フロントエンド
- **React 18.3.1 + TypeScript 5.5.4**: 型安全でモダンなフロントエンド開発
- **Zustand 4.5.2**: シンプルで高速な状態管理ライブラリ（9個のストア）
- **Vite 5.4.2**: 高速なビルドツールと開発サーバー
- **Heroicons**: 統一されたアイコンライブラリ
- **CSS Modules**: コンポーネントスコープのスタイリング

### バックエンド
- **Node.js + Express**: RESTful API サーバー
- **WebSocket (ws)**: リアルタイムチャットと配信リスト更新
- **Redis**: 多層キャッシング戦略（配信リスト、エモート、フォローチャンネル）
- **Twitch EventSub**: WebSocket + Conduit によるリアルタイム通知
- **TMI.js**: Twitch チャット IRC クライアント

### アーキテクチャパターン
- **バックエンド駆動型アーキテクチャ**: API呼び出しを最小化し、レート制限を回避
- **多層キャッシング**: Redis + メモリキャッシュでパフォーマンス最適化
- **動的チャンネル割り当て**: 優先度ベースのリソース管理
- **異常検知**: リアルタイム攻撃検知とレート制限
- **OAuth 2.0認証**: セキュアなユーザー認証とAPI連携

### 運用・監視
- **アナリティクス追跡**: ユーザー行動分析とメトリクス収集
- **セキュリティ監視**: 攻撃検知、ブロックリスト、セッション管理
- **負荷テスト**: k6 による定期的なパフォーマンステスト
- **管理者ダッシュボード**: システム全体の可視化と制御

## 1.5 ユースケース例

### ケース1: esportsトーナメント視聴
複数の配信者が同じトーナメントを異なる視点で配信している場合、ふくまど！を使って4つの視点を同時に表示し、試合の全体像を把握できます。

### ケース2: 配信者比較
お気に入りの配信者が複数人同時に配信している場合、2x2レイアウトで全員の配信を監視し、興味のあるコンテンツに素早く切り替えられます。

### ケース3: マルチプラットフォーム視聴
YouTubeとTwitchで同時配信しているクリエイターの両方のチャットを確認し、コミュニティの反応を横断的に観察できます。

## 1.6 プロジェクトの進化

### バージョン履歴

- **v0.1.0**: 初期リリース - 基本的なマルチストリーミング機能
- **v0.2.0**: キャッシング最適化、検索機能強化
- **v0.2.1**: バックエンド駆動型アーキテクチャへの移行、WebSocket統合
- **v0.3.0**: 管理者ダッシュボード、アナリティクス、セキュリティ強化
- **v0.3.1**: メンテナンスモード、Cookie同意管理、法的文書管理
- **v0.3.2**: Twitch EventSub Conduit統合、動的チャンネル割り当て
- **v0.3.3**: 負荷テスト実施、パフォーマンス最適化、レスポンシブ対応強化

### 最近の主要アップデート

#### 管理・運用機能 (v0.3.0-0.3.1)
- 管理者ダッシュボードの実装（16個のタブによる包括的な管理）
- リアルタイムアナリティクスとPVトラッキング
- 異常検知とセキュリティ監視の強化
- メンテナンスモードの実装
- GDPR準拠のCookie同意管理

#### パフォーマンス最適化 (v0.3.2-0.3.3)
- Twitch EventSub Conduitへの移行（WebSocket接続数を最大96%削減）
- 動的チャンネル割り当てと優先度管理
- エモート・フォローチャンネル・配信リストの多層キャッシング
- k6による負荷テスト実施と分析

#### ユーザー体験向上 (v0.3.1-0.3.3)
- レスポンシブデザインの強化
- モバイルデバイス対応の改善
- 非対応ブラウザの検出と通知
- 利用規約・プライバシーポリシーの動的配信

### 今後の開発予定

- ニコニコ生放送の完全サポート
- モバイルアプリ版の開発（React Native）
- 配信録画・クリップ機能
- コミュニティ機能（お気に入り配信共有など）
- AIベースの配信推薦システム
- 多言語対応（英語、韓国語、中国語）
